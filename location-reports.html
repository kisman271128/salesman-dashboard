<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Accuracy Report Generator</title>
    
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
            min-height: 100vh;
            color: #1e293b;
        }

        .report-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .report-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 32px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 32px;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
        }

        .report-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }

        .report-subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 24px;
        }

        .report-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .meta-item {
            text-align: center;
        }

        .meta-label {
            font-size: 12px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .meta-value {
            font-size: 16px;
            font-weight: 600;
        }

        /* ===== REPORT CONTROLS ===== */
        .report-controls {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .controls-header {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        .control-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 6px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .control-input {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: #f8fafc;
            transition: all 0.3s ease;
        }

        .control-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .control-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        /* ===== REPORT SECTIONS ===== */
        .report-section {
            background: white;
            border-radius: 16px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            padding: 20px 24px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-toggle {
            background: none;
            border: none;
            color: #64748b;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .section-toggle:hover {
            color: #1e293b;
        }

        .section-content {
            padding: 24px;
        }

        .section-content.collapsed {
            display: none;
        }

        /* ===== SUMMARY CARDS ===== */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .summary-card {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .card-icon {
            font-size: 32px;
            margin-bottom: 12px;
            display: block;
        }

        .card-value {
            font-size: 28px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .card-label {
            font-size: 14px;
            color: #64748b;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .card-change {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
        }

        .change-positive { 
            background: #ecfdf5; 
            color: #10b981; 
        }
        .change-negative { 
            background: #fef2f2; 
            color: #ef4444; 
        }
        .change-neutral { 
            background: #f8fafc; 
            color: #64748b; 
        }

        /* ===== CHARTS ===== */
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 20px;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }

        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 16px;
            text-align: center;
        }

        /* ===== DATA TABLES ===== */
        .data-table-wrapper {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: #f8fafc;
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #f1f5f9;
            font-size: 13px;
            vertical-align: middle;
        }

        .data-table tr:hover {
            background: #f8fafc;
        }

        .compliance-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-block;
        }

        .badge-excellent {
            background: #ecfdf5;
            color: #10b981;
        }

        .badge-good {
            background: #dbeafe;
            color: #3b82f6;
        }

        .badge-warning {
            background: #fef3c7;
            color: #f59e0b;
        }

        .badge-poor {
            background: #fef2f2;
            color: #ef4444;
        }

        /* ===== INSIGHTS SECTION ===== */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .insight-card {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 1px solid #0ea5e9;
            border-radius: 12px;
            padding: 20px;
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .insight-icon {
            font-size: 20px;
        }

        .insight-title {
            font-size: 14px;
            font-weight: 600;
            color: #0369a1;
        }

        .insight-content {
            font-size: 13px;
            color: #075985;
            line-height: 1.5;
        }

        .insight-metric {
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 12px;
            border-radius: 8px;
            margin-top: 8px;
            font-weight: 600;
            text-align: center;
        }

        /* ===== EXPORT OPTIONS ===== */
        .export-section {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 16px;
            padding: 24px;
            margin-top: 32px;
            border: 2px solid #e2e8f0;
        }

        .export-header {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .export-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .export-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .option-title {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .option-description {
            font-size: 11px;
            color: #64748b;
        }

        /* ===== LOADING STATES ===== */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .loading-content {
            background: white;
            padding: 32px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1024px) {
            .report-container {
                padding: 16px;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .control-actions {
                flex-direction: column;
            }

            .chart-grid {
                grid-template-columns: 1fr;
            }

            .summary-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .report-title {
                font-size: 24px;
            }

            .report-meta {
                grid-template-columns: repeat(2, 1fr);
            }

            .section-content {
                padding: 16px;
            }

            .chart-container {
                height: 250px;
            }

            .export-options {
                grid-template-columns: 1fr;
            }
        }

        /* ===== NOTIFICATION ===== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 16px 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            opacity: 0;
            transform: translateX(400px);
            transition: all 0.3s ease;
            border-left: 4px solid #10b981;
            max-width: 350px;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.error {
            border-left-color: #ef4444;
        }

        .notification.warning {
            border-left-color: #f59e0b;
        }

        .notification-content {
            font-size: 14px;
            color: #1e293b;
        }
    </style>
</head>
<body>
    <div class="report-container">
        <!-- Header -->
        <div class="report-header">
            <div class="report-title">
                üìä Location Accuracy Report Generator
            </div>
            <div class="report-subtitle">
                Comprehensive analysis and reporting for visit location compliance
            </div>
            <div class="report-meta">
                <div class="meta-item">
                    <div class="meta-label">Report Date</div>
                    <div class="meta-value" id="reportDate">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Data Period</div>
                    <div class="meta-value" id="dataPeriod">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Total Records</div>
                    <div class="meta-value" id="totalRecords">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Report Status</div>
                    <div class="meta-value" id="reportStatus">Ready</div>
                </div>
            </div>
        </div>

        <!-- Report Controls -->
        <div class="report-controls">
            <div class="controls-header">
                üéõÔ∏è Report Configuration
            </div>
            <div class="controls-grid">
                <div class="control-group">
                    <label class="control-label">Start Date</label>
                    <input type="date" class="control-input" id="startDate">
                </div>
                <div class="control-group">
                    <label class="control-label">End Date</label>
                    <input type="date" class="control-input" id="endDate">
                </div>
                <div class="control-group">
                    <label class="control-label">Salesman Filter</label>
                    <select class="control-input" id="salesmanFilter">
                        <option value="">All Salesman</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">Report Type</label>
                    <select class="control-input" id="reportType">
                        <option value="comprehensive">Comprehensive Report</option>
                        <option value="summary">Executive Summary</option>
                        <option value="compliance">Compliance Focus</option>
                        <option value="performance">Performance Analysis</option>
                    </select>
                </div>
            </div>
            <div class="control-actions">
                <button class="action-btn btn-primary" onclick="generateReport()">
                    üìä Generate Report
                </button>
                <button class="action-btn btn-secondary" onclick="loadSampleData()">
                    üé≤ Load Sample Data
                </button>
                <button class="action-btn btn-secondary" onclick="clearReport()">
                    üßπ Clear Report
                </button>
                <button class="action-btn btn-success" onclick="exportReport()">
                    üì§ Export Report
                </button>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="report-section" id="summarySection">
            <div class="section-header">
                <div class="section-title">üìà Executive Summary</div>
                <button class="section-toggle" onclick="toggleSection('summarySection')">‚ñº</button>
            </div>
            <div class="section-content">
                <div class="summary-grid">
                    <div class="summary-card">
                        <div class="card-icon">üìç</div>
                        <div class="card-value" id="totalVisits">-</div>
                        <div class="card-label">Total Visits</div>
                        <div class="card-change change-neutral" id="visitsChange">-</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">‚úÖ</div>
                        <div class="card-value" id="complianceRate">-</div>
                        <div class="card-label">Compliance Rate</div>
                        <div class="card-change change-positive" id="complianceChange">-</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">üéØ</div>
                        <div class="card-value" id="averageAccuracy">-</div>
                        <div class="card-label">Average Accuracy</div>
                        <div class="card-change change-positive" id="accuracyChange">-</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">‚ö†Ô∏è</div>
                        <div class="card-value" id="totalAlerts">-</div>
                        <div class="card-label">Location Alerts</div>
                        <div class="card-change change-negative" id="alertsChange">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="report-section" id="chartsSection">
            <div class="section-header">
                <div class="section-title">üìä Data Visualization</div>
                <button class="section-toggle" onclick="toggleSection('chartsSection')">‚ñº</button>
            </div>
            <div class="section-content">
                <div class="chart-grid">
                    <div class="chart-card">
                        <div class="chart-title">Daily Compliance Trends</div>
                        <div class="chart-container">
                            <canvas id="complianceChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Location Accuracy Distribution</div>
                        <div class="chart-container">
                            <canvas id="accuracyChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Salesman Performance</div>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Visit Patterns</div>
                        <div class="chart-container">
                            <canvas id="patternsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Analysis -->
        <div class="report-section" id="analysisSection">
            <div class="section-header">
                <div class="section-title">üîç Detailed Analysis</div>
                <button class="section-toggle" onclick="toggleSection('analysisSection')">‚ñº</button>
            </div>
            <div class="section-content">
                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Salesman</th>
                                <th>Total Visits</th>
                                <th>Compliance Rate</th>
                                <th>Avg Distance</th>
                                <th>Accuracy Score</th>
                                <th>Alerts</th>
                                <th>Performance</th>
                            </tr>
                        </thead>
                        <tbody id="analysisTableBody">
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 40px; color: #64748b;">
                                    Generate report to view detailed analysis
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- AI Insights -->
        <div class="report-section" id="insightsSection">
            <div class="section-header">
                <div class="section-title">ü§ñ AI-Powered Insights</div>
                <button class="section-toggle" onclick="toggleSection('insightsSection')">‚ñº</button>
            </div>
            <div class="section-content">
                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon">üìà</div>
                            <div class="insight-title">Compliance Trends</div>
                        </div>
                        <div class="insight-content" id="complianceInsight">
                            Generate report to view AI-powered compliance insights
                        </div>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon">üéØ</div>
                            <div class="insight-title">Accuracy Patterns</div>
                        </div>
                        <div class="insight-content" id="accuracyInsight">
                            Generate report to view accuracy pattern analysis
                        </div>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon">‚ö°</div>
                            <div class="insight-title">Performance Recommendations</div>
                        </div>
                        <div class="insight-content" id="performanceInsight">
                            Generate report to view performance improvement recommendations
                        </div>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon">üîÆ</div>
                            <div class="insight-title">Predictive Analysis</div>
                        </div>
                        <div class="insight-content" id="predictiveInsight">
                            Generate report to view predictive analysis and forecasts
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Section -->
        <div class="export-section">
            <div class="export-header">
                üì§ Export Options
            </div>
            <div class="export-options">
                <div class="export-option selected" data-format="pdf">
                    <div class="option-icon">üìÑ</div>
                    <div class="option-title">PDF Report</div>
                    <div class="option-description">Complete formatted report</div>
                </div>
                <div class="export-option" data-format="excel">
                    <div class="option-icon">üìä</div>
                    <div class="option-title">Excel Workbook</div>
                    <div class="option-description">Data tables and charts</div>
                </div>
                <div class="export-option" data-format="csv">
                    <div class="option-icon">üìã</div>
                    <div class="option-title">CSV Data</div>
                    <div class="option-description">Raw data export</div>
                </div>
                <div class="export-option" data-format="json">
                    <div class="option-icon">üîó</div>
                    <div class="option-title">JSON Data</div>
                    <div class="option-description">API-ready format</div>
                </div>
            </div>
            <div class="control-actions">
                <button class="action-btn btn-success" onclick="exportToFormat()">
                    üì§ Export Selected Format
                </button>
                <button class="action-btn btn-secondary" onclick="previewExport()">
                    üëÅÔ∏è Preview Export
                </button>
                <button class="action-btn btn-secondary" onclick="scheduleReport()">
                    ‚è∞ Schedule Report
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText">Generating report...</div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-content" id="notificationContent"></div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let reportData = null;
        let reportCharts = {};
        let selectedExportFormat = 'pdf';

        // ===== REPORT GENERATOR CLASS =====
        class LocationReportGenerator {
            constructor() {
                this.locationData = [];
                this.analysisResults = {};
                this.isInitialized = false;
                
                this.init();
            }
            
            init() {
                if (this.isInitialized) return;
                console.log('üìä Location Report Generator initialized');
                this.isInitialized = true;
                
                this.initializeDateInputs();
                this.initializeExportOptions();
                this.loadAvailableSalesman();
            }
            
            initializeDateInputs() {
                const today = new Date();
                const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
                
                document.getElementById('endDate').value = today.toISOString().split('T')[0];
                document.getElementById('startDate').value = weekAgo.toISOString().split('T')[0];
                
                // Update report meta
                document.getElementById('reportDate').textContent = today.toLocaleDateString();
            }
            
            initializeExportOptions() {
                document.querySelectorAll('.export-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelectorAll('.export-option').forEach(opt => 
                            opt.classList.remove('selected'));
                        option.classList.add('selected');
                        selectedExportFormat = option.dataset.format;
                    });
                });
            }
            
            loadAvailableSalesman() {
                const salesmanSelect = document.getElementById('salesmanFilter');
                
                // Scan localStorage for available salesman
                const salesmanIds = new Set();
                
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key && key.startsWith('visit_analytics_geo_')) {
                        const parts = key.split('_');
                        if (parts.length >= 4) {
                            const salesmanId = parts[3];
                            salesmanIds.add(salesmanId);
                        }
                    }
                }
                
                salesmanIds.forEach(salesmanId => {
                    const option = document.createElement('option');
                    option.value = salesmanId;
                    option.textContent = `Salesman ${salesmanId}`;
                    salesmanSelect.appendChild(option);
                });
                
                console.log(`üë• Loaded ${salesmanIds.size} salesman options`);
            }
            
            generateReport() {
                const startDate = document.getElementById('startDate').value;
                const endDate = document.getElementById('endDate').value;
                const salesmanFilter = document.getElementById('salesmanFilter').value;
                const reportType = document.getElementById('reportType').value;
                
                if (!startDate || !endDate) {
                    this.showNotification('Please select date range', 'error');
                    return;
                }
                
                this.showLoading('Analyzing location data...');
                
                setTimeout(() => {
                    this.loadLocationData(startDate, endDate, salesmanFilter);
                    this.analyzeData();
                    this.updateSummaryCards();
                    this.generateCharts();
                    this.generateDetailedAnalysis();
                    this.generateAIInsights();
                    this.updateReportMeta(startDate, endDate);
                    
                    this.hideLoading();
                    this.showNotification('Report generated successfully', 'success');
                }, 2000);
            }
            
            loadLocationData(startDate, endDate, salesmanFilter) {
                this.locationData = [];
                
                let currentDate = new Date(startDate);
                const endDateObj = new Date(endDate);
                
                while (currentDate <= endDateObj) {
                    const dateStr = currentDate.toISOString().split('T')[0];
                    this.loadDataForDate(dateStr, salesmanFilter);
                    currentDate.setDate(currentDate.getDate() + 1);
                }
                
                console.log(`üìä Loaded ${this.locationData.length} location records`);
            }
            
            loadDataForDate(dateStr, salesmanFilter) {
                const geoAnalyticsPattern = `visit_analytics_geo_${dateStr}_`;
                
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    
                    if (key && key.startsWith(geoAnalyticsPattern)) {
                        const salesmanId = key.replace(geoAnalyticsPattern, '');
                        
                        if (salesmanFilter && salesmanId !== salesmanFilter) {
                            continue;
                        }
                        
                        try {
                            const analyticsData = JSON.parse(localStorage.getItem(key) || '[]');
                            
                            analyticsData.forEach(event => {
                                if (event.event_name === 'visit_location_verification' && event.location) {
                                    const locationRecord = {
                                        date: dateStr,
                                        salesman_id: salesmanId,
                                        salesman_name: event.salesman_name,
                                        customer_name: event.event_data.customer_name,
                                        actual_location: event.location,
                                        master_location: event.event_data.master_coordinates,
                                        distance: event.event_data.distance_meters,
                                        accuracy: event.location.accuracy,
                                        timestamp: event.timestamp,
                                        compliance_status: this.getComplianceStatus(event.event_data.distance_meters)
                                    };
                                    
                                    this.locationData.push(locationRecord);
                                }
                            });
                            
                        } catch (error) {
                            console.error(`‚ùå Error loading data for ${key}:`, error);
                        }
                    }
                }
            }
            
            getComplianceStatus(distance) {
                if (distance <= 50) return 'excellent';
                if (distance <= 100) return 'good';
                if (distance <= 500) return 'warning';
                return 'poor';
            }
            
            analyzeData() {
                if (this.locationData.length === 0) {
                    this.analysisResults = this.getDefaultAnalysis();
                    return;
                }
                
                const totalVisits = this.locationData.length;
                const salesmanStats = {};
                const dailyStats = {};
                
                // Process each location record
                this.locationData.forEach(record => {
                    // Salesman statistics
                    if (!salesmanStats[record.salesman_id]) {
                        salesmanStats[record.salesman_id] = {
                            name: record.salesman_name,
                            visits: 0,
                            totalDistance: 0,
                            compliance: { excellent: 0, good: 0, warning: 0, poor: 0 },
                            accuracySum: 0
                        };
                    }
                    
                    const stats = salesmanStats[record.salesman_id];
                    stats.visits++;
                    stats.totalDistance += record.distance;
                    stats.compliance[record.compliance_status]++;
                    stats.accuracySum += record.accuracy;
                    
                    // Daily statistics
                    if (!dailyStats[record.date]) {
                        dailyStats[record.date] = {
                            visits: 0,
                            compliance: { excellent: 0, good: 0, warning: 0, poor: 0 }
                        };
                    }
                    
                    dailyStats[record.date].visits++;
                    dailyStats[record.date].compliance[record.compliance_status]++;
                });
                
                // Calculate overall metrics
                const complianceCount = this.locationData.filter(r => 
                    r.compliance_status === 'excellent' || r.compliance_status === 'good'
                ).length;
                
                const complianceRate = ((complianceCount / totalVisits) * 100).toFixed(1);
                const averageDistance = (this.locationData.reduce((sum, r) => sum + r.distance, 0) / totalVisits).toFixed(1);
                const averageAccuracy = (this.locationData.reduce((sum, r) => sum + r.accuracy, 0) / totalVisits).toFixed(1);
                const totalAlerts = this.locationData.filter(r => r.compliance_status === 'warning' || r.compliance_status === 'poor').length;
                
                this.analysisResults = {
                    totalVisits,
                    complianceRate,
                    averageDistance,
                    averageAccuracy,
                    totalAlerts,
                    salesmanStats,
                    dailyStats
                };
                
                console.log('üìà Data analysis completed:', this.analysisResults);
            }
            
            getDefaultAnalysis() {
                return {
                    totalVisits: 0,
                    complianceRate: '0.0',
                    averageDistance: '0.0',
                    averageAccuracy: '0.0',
                    totalAlerts: 0,
                    salesmanStats: {},
                    dailyStats: {}
                };
            }
            
            updateSummaryCards() {
                const analysis = this.analysisResults;
                
                document.getElementById('totalVisits').textContent = analysis.totalVisits;
                document.getElementById('complianceRate').textContent = analysis.complianceRate + '%';
                document.getElementById('averageAccuracy').textContent = '¬±' + analysis.averageAccuracy + 'm';
                document.getElementById('totalAlerts').textContent = analysis.totalAlerts;
                
                // Update change indicators (demo values)
                document.getElementById('visitsChange').textContent = '+12%';
                document.getElementById('complianceChange').textContent = '+5.2%';
                document.getElementById('accuracyChange').textContent = '+8.1%';
                document.getElementById('alertsChange').textContent = '-15%';
            }
            
            generateCharts() {
                this.generateComplianceChart();
                this.generateAccuracyChart();
                this.generatePerformanceChart();
                this.generatePatternsChart();
            }
            
            generateComplianceChart() {
                const ctx = document.getElementById('complianceChart').getContext('2d');
                
                // Destroy existing chart
                if (reportCharts.compliance) {
                    reportCharts.compliance.destroy();
                }
                
                const dailyStats = this.analysisResults.dailyStats;
                const dates = Object.keys(dailyStats).sort();
                const complianceRates = dates.map(date => {
                    const stats = dailyStats[date];
                    const compliant = stats.compliance.excellent + stats.compliance.good;
                    return ((compliant / stats.visits) * 100).toFixed(1);
                });
                
                reportCharts.compliance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: dates.map(date => new Date(date).toLocaleDateString()),
                        datasets: [{
                            label: 'Compliance Rate (%)',
                            data: complianceRates,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
            
            generateAccuracyChart() {
                const ctx = document.getElementById('accuracyChart').getContext('2d');
                
                if (reportCharts.accuracy) {
                    reportCharts.accuracy.destroy();
                }
                
                // Create accuracy distribution
                const accuracyRanges = {
                    'Excellent (‚â§20m)': 0,
                    'Good (21-50m)': 0,
                    'Fair (51-100m)': 0,
                    'Poor (>100m)': 0
                };
                
                this.locationData.forEach(record => {
                    const accuracy = record.accuracy;
                    if (accuracy <= 20) accuracyRanges['Excellent (‚â§20m)']++;
                    else if (accuracy <= 50) accuracyRanges['Good (21-50m)']++;
                    else if (accuracy <= 100) accuracyRanges['Fair (51-100m)']++;
                    else accuracyRanges['Poor (>100m)']++;
                });
                
                reportCharts.accuracy = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(accuracyRanges),
                        datasets: [{
                            data: Object.values(accuracyRanges),
                            backgroundColor: [
                                '#10b981',
                                '#3b82f6',
                                '#f59e0b',
                                '#ef4444'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            generatePerformanceChart() {
                const ctx = document.getElementById('performanceChart').getContext('2d');
                
                if (reportCharts.performance) {
                    reportCharts.performance.destroy();
                }
                
                const salesmanStats = this.analysisResults.salesmanStats;
                const salesmanNames = Object.values(salesmanStats).map(s => s.name);
                const complianceRates = Object.values(salesmanStats).map(s => {
                    const compliant = s.compliance.excellent + s.compliance.good;
                    return ((compliant / s.visits) * 100).toFixed(1);
                });
                
                reportCharts.performance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: salesmanNames,
                        datasets: [{
                            label: 'Compliance Rate (%)',
                            data: complianceRates,
                            backgroundColor: '#667eea',
                            borderColor: '#4f46e5',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
            
            generatePatternsChart() {
                const ctx = document.getElementById('patternsChart').getContext('2d');
                
                if (reportCharts.patterns) {
                    reportCharts.patterns.destroy();
                }
                
                // Hourly visit patterns
                const hourlyVisits = {};
                for (let hour = 0; hour < 24; hour++) {
                    hourlyVisits[hour] = 0;
                }
                
                this.locationData.forEach(record => {
                    const hour = new Date(record.timestamp).getHours();
                    hourlyVisits[hour]++;
                });
                
                reportCharts.patterns = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Object.keys(hourlyVisits).map(h => h + ':00'),
                        datasets: [{
                            label: 'Visits per Hour',
                            data: Object.values(hourlyVisits),
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            generateDetailedAnalysis() {
                const tableBody = document.getElementById('analysisTableBody');
                const salesmanStats = this.analysisResults.salesmanStats;
                
                if (Object.keys(salesmanStats).length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 40px; color: #64748b;">
                                No data available for the selected period
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let html = '';
                
                Object.entries(salesmanStats).forEach(([salesmanId, stats]) => {
                    const complianceRate = ((stats.compliance.excellent + stats.compliance.good) / stats.visits * 100).toFixed(1);
                    const avgDistance = (stats.totalDistance / stats.visits).toFixed(1);
                    const avgAccuracy = (stats.accuracySum / stats.visits).toFixed(1);
                    const alerts = stats.compliance.warning + stats.compliance.poor;
                    
                    let performanceBadge = 'badge-excellent';
                    let performanceText = 'Excellent';
                    
                    if (complianceRate < 70) {
                        performanceBadge = 'badge-poor';
                        performanceText = 'Needs Improvement';
                    } else if (complianceRate < 85) {
                        performanceBadge = 'badge-warning';
                        performanceText = 'Good';
                    } else if (complianceRate < 95) {
                        performanceBadge = 'badge-good';
                        performanceText = 'Very Good';
                    }
                    
                    html += `
                        <tr>
                            <td><strong>${stats.name}</strong><br><small>ID: ${salesmanId}</small></td>
                            <td>${stats.visits}</td>
                            <td>${complianceRate}%</td>
                            <td>${avgDistance}m</td>
                            <td>¬±${avgAccuracy}m</td>
                            <td>${alerts}</td>
                            <td><span class="compliance-badge ${performanceBadge}">${performanceText}</span></td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = html;
            }
            
            generateAIInsights() {
                const analysis = this.analysisResults;
                
                // Compliance insights
                const complianceRate = parseFloat(analysis.complianceRate);
                let complianceInsight = '';
                
                if (complianceRate >= 95) {
                    complianceInsight = `Outstanding compliance performance at ${complianceRate}%. The team consistently maintains excellent location accuracy with minimal deviations.`;
                } else if (complianceRate >= 85) {
                    complianceInsight = `Good compliance rate of ${complianceRate}%. There's room for improvement in ${(100 - complianceRate).toFixed(1)}% of visits. Focus on training for better GPS usage.`;
                } else {
                    complianceInsight = `Compliance rate of ${complianceRate}% requires attention. Implement additional location verification protocols and provide GPS accuracy training.`;
                }
                
                // Accuracy insights
                const avgAccuracy = parseFloat(analysis.averageAccuracy);
                let accuracyInsight = '';
                
                if (avgAccuracy <= 20) {
                    accuracyInsight = `Excellent location accuracy with average precision of ¬±${avgAccuracy}m. GPS devices are working optimally with strong satellite reception.`;
                } else if (avgAccuracy <= 50) {
                    accuracyInsight = `Good accuracy at ¬±${avgAccuracy}m average. Consider calibrating GPS devices and ensuring clear sky visibility during visits.`;
                } else {
                    accuracyInsight = `Location accuracy of ¬±${avgAccuracy}m needs improvement. Check device settings, update GPS firmware, and avoid visits in areas with poor signal.`;
                }
                
                // Performance insights
                const salesmanCount = Object.keys(analysis.salesmanStats).length;
                let performanceInsight = `Performance analysis across ${salesmanCount} salesman shows varying compliance levels. `;
                
                if (analysis.totalAlerts > analysis.totalVisits * 0.2) {
                    performanceInsight += 'High alert frequency suggests need for additional training and better visit planning.';
                } else {
                    performanceInsight += 'Alert levels are within acceptable ranges, indicating good overall performance.';
                }
                
                // Predictive insights
                let predictiveInsight = 'Based on current trends, ';
                
                if (complianceRate >= 90) {
                    predictiveInsight += 'the team is on track to exceed compliance targets. Maintain current practices and consider expanding coverage areas.';
                } else {
                    predictiveInsight += `projected monthly compliance may fall short of targets. Implement corrective measures to improve ${(95 - complianceRate).toFixed(1)}% gap.`;
                }
                
                // Update insights
                document.getElementById('complianceInsight').innerHTML = complianceInsight + 
                    `<div class="insight-metric">Current: ${complianceRate}% | Target: 95%</div>`;
                
                document.getElementById('accuracyInsight').innerHTML = accuracyInsight + 
                    `<div class="insight-metric">Average: ¬±${avgAccuracy}m | Target: ¬±20m</div>`;
                
                document.getElementById('performanceInsight').innerHTML = performanceInsight + 
                    `<div class="insight-metric">Alerts: ${analysis.totalAlerts} | Rate: ${(analysis.totalAlerts/analysis.totalVisits*100).toFixed(1)}%</div>`;
                
                document.getElementById('predictiveInsight').innerHTML = predictiveInsight + 
                    `<div class="insight-metric">Trend: ${complianceRate >= 90 ? 'Positive' : 'Needs Attention'}</div>`;
            }
            
            updateReportMeta(startDate, endDate) {
                const start = new Date(startDate).toLocaleDateString();
                const end = new Date(endDate).toLocaleDateString();
                
                document.getElementById('dataPeriod').textContent = `${start} - ${end}`;
                document.getElementById('totalRecords').textContent = this.locationData.length;
                document.getElementById('reportStatus').textContent = 'Generated';
            }
            
            loadSampleData() {
                this.showLoading('Loading sample data...');
                
                setTimeout(() => {
                    // Generate sample data
                    this.generateSampleData();
                    this.analyzeData();
                    this.updateSummaryCards();
                    this.generateCharts();
                    this.generateDetailedAnalysis();
                    this.generateAIInsights();
                    
                    this.hideLoading();
                    this.showNotification('Sample data loaded successfully', 'success');
                }, 1500);
            }
            
            generateSampleData() {
                this.locationData = [];
                const salesmanList = ['John Doe', 'Jane Smith', 'Mike Johnson', 'Sarah Wilson'];
                const customerList = ['Toko Sinar Jaya', 'Warung Bu Sari', 'Supermarket Central', 'Toko Makmur'];
                
                // Generate 50 sample records
                for (let i = 0; i < 50; i++) {
                    const salesmanId = Math.floor(Math.random() * 4) + 1;
                    const distance = Math.random() * 200; // 0-200m
                    const accuracy = 10 + Math.random() * 90; // 10-100m
                    
                    this.locationData.push({
                        date: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        salesman_id: salesmanId.toString(),
                        salesman_name: salesmanList[salesmanId - 1],
                        customer_name: customerList[Math.floor(Math.random() * customerList.length)],
                        distance: distance,
                        accuracy: accuracy,
                        compliance_status: this.getComplianceStatus(distance),
                        timestamp: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString()
                    });
                }
                
                console.log('üìä Generated sample data:', this.locationData.length, 'records');
            }
            
            exportReport() {
                this.exportToFormat();
            }
            
            exportToFormat() {
                this.showLoading(`Exporting to ${selectedExportFormat.toUpperCase()}...`);
                
                setTimeout(() => {
                    switch (selectedExportFormat) {
                        case 'pdf':
                            this.exportToPDF();
                            break;
                        case 'excel':
                            this.exportToExcel();
                            break;
                        case 'csv':
                            this.exportToCSV();
                            break;
                        case 'json':
                            this.exportToJSON();
                            break;
                    }
                    
                    this.hideLoading();
                    this.showNotification(`Report exported as ${selectedExportFormat.toUpperCase()}`, 'success');
                }, 2000);
            }
            
            exportToPDF() {
                // Basic PDF export implementation
                const reportContent = this.generatePDFContent();
                const blob = new Blob([reportContent], { type: 'application/pdf' });
                this.downloadFile(blob, `location_report_${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            exportToExcel() {
                const csvContent = this.generateCSVContent();
                const blob = new Blob([csvContent], { type: 'text/csv' });
                this.downloadFile(blob, `location_report_${new Date().toISOString().split('T')[0]}.csv`);
            }
            
            exportToCSV() {
                const csvContent = this.generateCSVContent();
                const blob = new Blob([csvContent], { type: 'text/csv' });
                this.downloadFile(blob, `location_data_${new Date().toISOString().split('T')[0]}.csv`);
            }
            
            exportToJSON() {
                const jsonContent = JSON.stringify({
                    report_date: new Date().toISOString(),
                    analysis_results: this.analysisResults,
                    location_data: this.locationData
                }, null, 2);
                
                const blob = new Blob([jsonContent], { type: 'application/json' });
                this.downloadFile(blob, `location_data_${new Date().toISOString().split('T')[0]}.json`);
            }
            
            generatePDFContent() {
                return `Location Accuracy Report
Generated: ${new Date().toLocaleString()}
Analysis Period: ${document.getElementById('dataPeriod').textContent}

Summary:
- Total Visits: ${this.analysisResults.totalVisits}
- Compliance Rate: ${this.analysisResults.complianceRate}%
- Average Accuracy: ¬±${this.analysisResults.averageAccuracy}m
- Total Alerts: ${this.analysisResults.totalAlerts}

This is a simplified PDF export. Use a proper PDF library for full formatting.`;
            }
            
            generateCSVContent() {
                const headers = [
                    'Date', 'Salesman_ID', 'Salesman_Name', 'Customer_Name',
                    'Distance_Meters', 'Accuracy_Meters', 'Compliance_Status', 'Timestamp'
                ];
                
                const rows = this.locationData.map(record => [
                    record.date,
                    record.salesman_id,
                    record.salesman_name,
                    record.customer_name,
                    record.distance ? record.distance.toFixed(2) : '',
                    record.accuracy ? record.accuracy.toFixed(2) : '',
                    record.compliance_status,
                    record.timestamp
                ]);
                
                return [headers, ...rows]
                    .map(row => row.map(cell => `"${cell}"`).join(','))
                    .join('\n');
            }
            
            downloadFile(blob, filename) {
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                window.URL.revokeObjectURL(url);
            }
            
            showLoading(message) {
                document.getElementById('loadingText').textContent = message;
                document.getElementById('loadingOverlay').classList.add('show');
            }
            
            hideLoading() {
                document.getElementById('loadingOverlay').classList.remove('show');
            }
            
            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                const content = document.getElementById('notificationContent');
                
                content.textContent = message;
                notification.className = `notification ${type}`;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }

        // ===== GLOBAL REPORT GENERATOR =====
        let reportGenerator = null;

        // ===== UI FUNCTIONS =====
        function generateReport() {
            if (reportGenerator) {
                reportGenerator.generateReport();
            }
        }

        function loadSampleData() {
            if (reportGenerator) {
                reportGenerator.loadSampleData();
            }
        }

        function clearReport() {
            // Clear all charts
            Object.values(reportCharts).forEach(chart => {
                if (chart) chart.destroy();
            });
            reportCharts = {};
            
            // Reset summary cards
            document.getElementById('totalVisits').textContent = '-';
            document.getElementById('complianceRate').textContent = '-';
            document.getElementById('averageAccuracy').textContent = '-';
            document.getElementById('totalAlerts').textContent = '-';
            
            // Clear analysis table
            document.getElementById('analysisTableBody').innerHTML = `
                <tr>
                    <td colspan="7" style="text-align: center; padding: 40px; color: #64748b;">
                        Generate report to view detailed analysis
                    </td>
                </tr>
            `;
            
            // Clear insights
            document.getElementById('complianceInsight').textContent = 'Generate report to view AI-powered compliance insights';
            document.getElementById('accuracyInsight').textContent = 'Generate report to view accuracy pattern analysis';
            document.getElementById('performanceInsight').textContent = 'Generate report to view performance improvement recommendations';
            document.getElementById('predictiveInsight').textContent = 'Generate report to view predictive analysis and forecasts';
            
            if (reportGenerator) {
                reportGenerator.showNotification('Report cleared', 'warning');
            }
        }

        function exportReport() {
            if (reportGenerator) {
                reportGenerator.exportReport();
            }
        }

        function exportToFormat() {
            if (reportGenerator) {
                reportGenerator.exportToFormat();
            }
        }

        function previewExport() {
            if (reportGenerator) {
                reportGenerator.showNotification('Export preview functionality coming soon', 'info');
            }
        }

        function scheduleReport() {
            if (reportGenerator) {
                reportGenerator.showNotification('Report scheduling functionality coming soon', 'info');
            }
        }

        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const content = section.querySelector('.section-content');
            const toggle = section.querySelector('.section-toggle');
            
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                toggle.textContent = '‚ñº';
            } else {
                content.classList.add('collapsed');
                toggle.textContent = '‚ñ∂';
            }
        }

        // ===== INITIALIZATION =====
        function initializeReportGenerator() {
            console.log('üìä Initializing Location Report Generator...');
            
            reportGenerator = new LocationReportGenerator();
            
            console.log('‚úÖ Report Generator ready');
        }

        // ===== PAGE LOAD =====
        window.onload = function() {
            console.log('üìä Starting Location Accuracy Report Generator...');
            console.log('üìà Features: Comprehensive analysis, AI insights, multi-format export');
            
            initializeReportGenerator();
        };

        console.log('‚úÖ Location Report Generator script loaded');
        console.log('üìä Advanced reporting with charts, analysis, and AI insights');
    </script>
</body>
</html>