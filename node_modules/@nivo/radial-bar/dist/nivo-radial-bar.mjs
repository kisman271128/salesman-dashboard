import{BasicTooltip as e,useTooltip as r}from"@nivo/tooltip";import{jsx as a,jsxs as n}from"react/jsx-runtime";import{useMemo as i,useCallback as o,createElement as t,forwardRef as l,Fragment as d}from"react";import{degreesToRadians as s,useValueFormatter as u,Container as c,useDimensions as v,clampArc as g,bindDefs as f,SvgWrapper as b,ResponsiveWrapper as p}from"@nivo/core";import{ArcsLayer as h,ArcLabelsLayer as m}from"@nivo/arcs";import{BoxLegendSvg as A}from"@nivo/legends";import{PolarGrid as R,RadialAxis as x,CircularAxis as k}from"@nivo/polar-axes";import{scaleLinear as M,scaleBand as C}from"d3-scale";import{arc as y}from"d3-shape";import{useOrdinalColorScale as I}from"@nivo/colors";import{castLinearScale as G,castBandScale as S,getScaleTicks as W}from"@nivo/scales";function w(){return w=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},w.apply(null,arguments)}function L(e,r){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;a[n]=e[n]}return a}var V={maxValue:"auto",layers:["grid","tracks","bars","labels","legends"],startAngle:0,endAngle:270,innerRadius:.3,padding:.2,padAngle:0,cornerRadius:0,enableTracks:!0,tracksColor:"rgba(0, 0, 0, .15)",enableRadialGrid:!0,enableCircularGrid:!0,radialAxisStart:{},radialAxisEnd:null,circularAxisInner:null,circularAxisOuter:{},colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableLabels:!1,label:"formattedValue",labelsSkipAngle:10,labelsSkipRadius:0,labelsRadiusOffset:.5,labelsTextColor:{theme:"labels.text.fill"},isInteractive:!0,tooltip:function(r){var i=r.bar;return a(e,{enableChip:!0,id:n("span",{children:[i.category," - ",i.groupId]}),value:i.formattedValue,color:i.color})},legends:[],defs:[],fill:[],animate:!0,motionConfig:"gentle",transitionMode:"centerRadius",renderWrapper:!0},E=w({},V),O=function(e){var n=e.center,i=e.bars,l=e.borderWidth,d=e.borderColor,s=e.arcGenerator,u=e.isInteractive,c=e.tooltip,v=e.onClick,g=e.onMouseEnter,f=e.onMouseMove,b=e.onMouseLeave,p=e.transitionMode,m=r(),A=m.showTooltipFromEvent,R=m.hideTooltip,x=o((function(e,r){null==v||v(e,r)}),[v]),k=o((function(e,r){A(t(c,{bar:e}),r),null==g||g(e,r)}),[A,c,g]),M=o((function(e,r){A(t(c,{bar:e}),r),null==f||f(e,r)}),[A,c,f]),C=o((function(e,r){R(),null==b||b(e,r)}),[R,b]);return a(h,{center:n,data:i,arcGenerator:s,borderWidth:l,borderColor:d,transitionMode:p,onClick:u?x:void 0,onMouseEnter:u?k:void 0,onMouseMove:u?M:void 0,onMouseLeave:u?C:void 0})},T=function(e){var r=e.center,n=e.tracks,i=e.arcGenerator,o=e.transitionMode;return a(h,{center:r,data:n,arcGenerator:i,borderWidth:0,borderColor:"none",transitionMode:o})},z=["isInteractive","animate","motionConfig","theme","renderWrapper"],H=function(e){var r=e.data,o=e.maxValue,l=void 0===o?E.maxValue:o,c=e.valueFormat,p=e.startAngle,h=void 0===p?E.startAngle:p,L=e.endAngle,z=void 0===L?E.endAngle:L,H=e.innerRadius,P=void 0===H?E.innerRadius:H,B=e.padding,D=void 0===B?E.padding:B,F=e.padAngle,j=void 0===F?E.padAngle:F,K=e.cornerRadius,q=void 0===K?E.cornerRadius:K,J=e.width,N=e.height,Q=e.margin,U=e.layers,X=void 0===U?E.layers:U,Y=e.enableTracks,Z=void 0===Y?E.enableTracks:Y,$=e.tracksColor,_=void 0===$?E.tracksColor:$,ee=e.enableRadialGrid,re=void 0===ee?E.enableRadialGrid:ee,ae=e.enableCircularGrid,ne=void 0===ae?E.enableCircularGrid:ae,ie=e.radialAxisStart,oe=void 0===ie?E.radialAxisStart:ie,te=e.radialAxisEnd,le=void 0===te?E.radialAxisEnd:te,de=e.circularAxisInner,se=void 0===de?E.circularAxisInner:de,ue=e.circularAxisOuter,ce=void 0===ue?E.circularAxisOuter:ue,ve=e.colors,ge=void 0===ve?E.colors:ve,fe=e.defs,be=void 0===fe?E.defs:fe,pe=e.fill,he=void 0===pe?E.fill:pe,me=e.borderWidth,Ae=void 0===me?E.borderWidth:me,Re=e.borderColor,xe=void 0===Re?E.borderColor:Re,ke=e.enableLabels,Me=void 0===ke?E.enableLabels:ke,Ce=e.label,ye=void 0===Ce?E.label:Ce,Ie=e.labelsSkipAngle,Ge=void 0===Ie?E.labelsSkipAngle:Ie,Se=e.labelsSkipRadius,We=void 0===Se?E.labelsSkipRadius:Se,we=e.labelsRadiusOffset,Le=void 0===we?E.labelsRadiusOffset:we,Ve=e.labelsTextColor,Ee=void 0===Ve?E.labelsTextColor:Ve,Oe=e.isInteractive,Te=void 0===Oe?E.isInteractive:Oe,ze=e.tooltip,He=void 0===ze?E.tooltip:ze,Pe=e.onClick,Be=e.onMouseEnter,De=e.onMouseMove,Fe=e.onMouseLeave,je=e.transitionMode,Ke=void 0===je?E.transitionMode:je,qe=e.legends,Je=void 0===qe?E.legends:qe,Ne=e.role,Qe=e.ariaLabel,Ue=e.ariaLabelledBy,Xe=e.ariaDescribedBy,Ye=e.forwardedRef,Ze=v(J,N,Q),$e=Ze.margin,_e=Ze.innerWidth,er=Ze.innerHeight,rr=Ze.outerWidth,ar=Ze.outerHeight,nr=g(h,z),ir=nr[0],or=nr[1],tr=function(e){var r=e.data,a=e.maxValue,n=void 0===a?E.maxValue:a,o=e.valueFormat,t=e.startAngle,l=void 0===t?V.startAngle:t,d=e.endAngle,c=void 0===d?V.endAngle:d,v=e.innerRadiusRatio,g=void 0===v?V.innerRadius:v,f=e.padding,b=void 0===f?V.padding:f,p=e.padAngle,h=void 0===p?V.padAngle:p,m=e.cornerRadius,A=void 0===m?V.cornerRadius:m,R=e.width,x=e.height,k=e.colors,w=void 0===k?V.colors:k,L=e.tracksColor,O=void 0===L?V.tracksColor:L,T=i((function(){return[R/2,x/2]}),[R,x]),z=Math.min.apply(Math,T),H=z*Math.min(g,1),P=I(w,"category"),B=i((function(){var e={serieIds:[],categories:[],groups:[],maxValue:0};return r.forEach((function(r){e.serieIds.push(r.id);var a=0;r.data.forEach((function(r){e.categories.includes(r.x)||e.categories.push(r.x),a+=r.y})),e.groups.push({id:r.id,total:a,data:r.data})})),e.maxValue="auto"===n?Math.max.apply(Math,e.groups.map((function(e){return e.total}))):n,e}),[r,n]),D=B.serieIds,F=B.categories,j=B.groups,K=B.maxValue,q=i((function(){return G(M().domain([0,K]).range([l,c]))}),[K,l,c]),J=i((function(){return S(C().domain(D).range([H,z]).padding(b))}),[D,z,H,b]),N=i((function(){return y().startAngle((function(e){return e.startAngle})).endAngle((function(e){return e.endAngle})).innerRadius((function(e){return e.innerRadius})).outerRadius((function(e){return e.outerRadius})).cornerRadius(A).padAngle(s(h))}),[A,h]),Q=u(o),U=i((function(){var e=[];return j.forEach((function(r){var a=0,n=J(r.id),i=n+J.bandwidth();r.data.forEach((function(o){var t=a+o.y,l={id:r.id+"."+o.x,data:o,groupId:r.id,category:o.x,value:o.y,formattedValue:Q(o.y),color:"",stackedValue:t,arc:{startAngle:s(q(a)),endAngle:s(q(t)),innerRadius:n,outerRadius:i}};l.color=P(l),a+=o.y,e.push(l)}))})),e}),[j,J,q,P,Q]),X=s(l),Y=s(c),Z=i((function(){return W(J).map((function(e){var r=J(e);return{id:e,color:O,arc:{startAngle:X,endAngle:Y,innerRadius:r,outerRadius:r+J.bandwidth()}}}))}),[J,X,Y,O]),$=i((function(){return F.map((function(e){var r=U.find((function(r){return r.category===e})),a=r?r.color:void 0;return{id:e,label:e,color:a}}))}),[F,U]),_=i((function(){return{center:T,outerRadius:z,innerRadius:H,bars:U,arcGenerator:N,radiusScale:J,valueScale:q}}),[T,z,H,U,N,J,q]);return{center:T,outerRadius:z,innerRadius:H,bars:U,arcGenerator:N,radiusScale:J,valueScale:q,tracks:Z,legendData:$,customLayerProps:_}}({data:r,maxValue:l,valueFormat:c,startAngle:ir,endAngle:or,innerRadiusRatio:P,padding:D,padAngle:j,cornerRadius:q,width:_e,height:er,colors:ge,tracksColor:_}),lr=tr.center,dr=tr.innerRadius,sr=tr.outerRadius,ur=tr.bars,cr=tr.arcGenerator,vr=tr.radiusScale,gr=tr.valueScale,fr=tr.tracks,br=tr.legendData,pr=tr.customLayerProps,hr={grid:null,tracks:null,bars:null,labels:null,legends:null};X.includes("grid")&&(hr.grid=n(d,{children:[a(R,{center:lr,enableRadialGrid:re,enableCircularGrid:ne,angleScale:gr,radiusScale:vr,startAngle:ir,endAngle:or}),oe&&a(x,w({center:lr,angle:Math.min(ir,or),scale:vr,ticksPosition:"before"},oe)),le&&a(x,w({center:lr,angle:Math.max(ir,or),scale:vr,ticksPosition:"after"},le)),se&&a(k,w({type:"inner",center:lr,radius:dr,startAngle:ir,endAngle:or,scale:gr},se)),ce&&a(k,w({type:"outer",center:lr,radius:sr,startAngle:ir,endAngle:or,scale:gr},ce))]},"grid")),X.includes("tracks")&&Z&&(hr.tracks=a(T,{center:lr,tracks:fr,arcGenerator:cr,transitionMode:Ke},"tracks")),X.includes("bars")&&(hr.bars=a(O,{center:lr,bars:ur,borderWidth:Ae,borderColor:xe,arcGenerator:cr,isInteractive:Te,tooltip:He,onClick:Pe,onMouseEnter:Be,onMouseMove:De,onMouseLeave:Fe,transitionMode:Ke},"bars")),X.includes("labels")&&Me&&(hr.labels=a(m,{center:lr,data:ur,label:ye,radiusOffset:Le,skipAngle:Ge,skipRadius:We,textColor:Ee,transitionMode:Ke},"labels")),X.includes("legends")&&Je.length>0&&(hr.legends=a(d,{children:Je.map((function(e,r){return a(A,w({},e,{containerWidth:_e,containerHeight:er,data:br}),r)}))},"legends"));var mr=f(be,ur,he,{dataKey:"data",targetKey:"fill"});return a(b,{width:rr,height:ar,margin:$e,defs:mr,role:Ne,ariaLabel:Qe,ariaLabelledBy:Ue,ariaDescribedBy:Xe,ref:Ye,children:X.map((function(e,r){var n;return"function"==typeof e?a(d,{children:t(e,pr)},r):null!=(n=null==hr?void 0:hr[e])?n:null}))})},P=l((function(e,r){var n=e.isInteractive,i=void 0===n?E.isInteractive:n,o=e.animate,t=void 0===o?E.animate:o,l=e.motionConfig,d=void 0===l?E.motionConfig:l,s=e.theme,u=e.renderWrapper,v=L(e,z);return a(c,{animate:t,isInteractive:i,motionConfig:d,renderWrapper:u,theme:s,children:a(H,w({isInteractive:i},v,{forwardedRef:r}))})})),B=["defaultWidth","defaultHeight","onResize","debounceResize"],D=l((function(e,r){var n=e.defaultWidth,i=e.defaultHeight,o=e.onResize,t=e.debounceResize,l=L(e,B);return a(p,{defaultWidth:n,defaultHeight:i,onResize:o,debounceResize:t,children:function(e){var n=e.width,i=e.height;return a(P,w({width:n,height:i},l,{ref:r}))}})}));export{P as RadialBar,D as ResponsiveRadialBar,V as commonDefaultProps,E as svgDefaultProps};
//# sourceMappingURL=nivo-radial-bar.mjs.map
